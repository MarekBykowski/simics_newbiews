<!doctype html>
<head>
<meta charset=utf-8>
<link rel="stylesheet" href="simics.css">
<title>g-cache</title>
<script>function postUrl() {
    window.parent.postMessage({ content_url: window.location.href }, "*");
}
if (window.parent != null && window.parent != window) {
    postUrl();
    window.addEventListener("hashchange", function () {
        postUrl();
    });
} else {
    // Check if we are part of a Simics doc site and redirect if we are
    fetch("../simics-doc-site-marker", { method: "HEAD" }).then(response => {
        if (response.ok) {
            window.location = "..#" + window.location.href;
        } else {
            console.info("Not part of a Simics documentation site");
        }
    }).catch(error => {
        console.warn("Failed to check if this is a Simics documentation site:",
            error);
    });
}</script>
</head><body>
<div class=chain>
<a href="__rm_class_ftp-service.html" class="previous">ftp-service</a>
<a href="__rm_class_gdb-remote.html" class="next">gdb-remote</a>
</div>
<div class=path>
<a href="index.html">Simics Reference Manual</a>&nbsp;/&nbsp;
<a href="classes.html">5 Classes</a>&nbsp;/&nbsp;
</div>
<h1 class="jdocu"><a class="not-numbered" name="__rm_class_g-cache">g-cache</a></h1>
<p>

<a name="g-cache"></a></p><dl class="jdocu_di">
<dt class="jdocu_descitem"><b>Provided By</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="modules.html#__rm_module_g-cache">g-cache</a>
</dd>
<dt class="jdocu_descitem">Description</dt><dd class="jdocu_descitem"><b>g-cache</b> is an in-order 'flat' cache model with the following features: configurable number of lines, line size, associativity; indexing/tagging on physical/virtual addresses; configurable policies for write-allocate and write-back; random, cyclic and lru replacement policies; several caches can be chained; a single cache can be connected to several processors; support for a simple MESI protocol between caches.
<p>
It is imperative to start Simics with the <i>-stall</i> flag to get correct cache statistics. It is possible to start Simics without it, but no transactions will then be stalled, and all transaction may not be visible to the cache.
</p><p>
Note that the sample MESI protocol was written to handle simple cases such as several L1 write-through caches with L2 caches synchronizing via MESI. To model more complex protocols, you will need to modify <b>g-cache</b>.
</p><p>
See <em>Simics Analyzer User's Guide</em> for more information.
</p></dd>
<dt class="jdocu_descitem"><b>Interfaces Implemented</b></dt><dd class="jdocu_descitem">cache_control, conf_object, log_object, mesi_listen_interface, timing_model</dd>
<dt class="jdocu_descitem"><b>Port Interfaces</b></dt><dd class="jdocu_descitem">c_dev_data_read (scalar_time) : cacheable device read<br>c_dev_data_write (scalar_time) : cacheable device write<br>copy_back (scalar_time) : copy back<br>data_read (scalar_time) : read<br>data_read_miss (scalar_time) : read miss<br>data_write (scalar_time) : write<br>data_write_miss (scalar_time) : write miss<br>dev_data_read (scalar_time) : device read<br>dev_data_write (scalar_time) : device write<br>inst_fetch (scalar_time) : instruction fetch<br>inst_fetch_miss (scalar_time) : instruction fetch miss<br>mesi_exclusive_to_shared (scalar_time) : MESI exclusive to shared<br>mesi_invalidate (scalar_time) : MESI invalidate<br>mesi_modified_to_shared (scalar_time) : MESI modified to shared<br>transaction (scalar_time) : transaction<br>uc_data_read (scalar_time) : uncached read<br>uc_data_write (scalar_time) : uncached write<br>uc_inst_fetch (scalar_time) : uncached instruction fetch</dd>
</dl><p></p><h2 class="jdocu"><a class="not-numbered" name="Attributes">Attributes</a></h2>
<p></p><dl><dt id="dt:cacheable_devices"><b><i>cacheable_devices</i></b></dt><p><a name="__rm_attribute_g-cache_cacheable_devices"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[o*]</code> or <code>nil</code>.
List of devices that can be cached.</dd></dl><p></p><dl><dt id="dt:config_assoc"><b><i>config_assoc</i></b></dt><p><a name="__rm_attribute_g-cache_config_assoc"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Cache associativity. Note that the total number of lines divided by the associativity must be a power of 2. (default is 4).</dd></dl><p></p><dl><dt id="dt:config_block_stc"><b><i>config_block_STC</i></b></dt><p><a name="__rm_attribute_g-cache_config_block_STC"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Prevent the cache from using the STCs. Read the 'Cache Simulation' chapter in Simics Analyzer Guide for more information (0: STC usage allowed, 1: STC usage blocked; default is 0).</dd></dl><p></p><dl><dt id="dt:config_line_number"><b><i>config_line_number</i></b></dt><p><a name="__rm_attribute_g-cache_config_line_number"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of lines in the cache (default is 128)</dd></dl><p></p><dl><dt id="dt:config_line_size"><b><i>config_line_size</i></b></dt><p><a name="__rm_attribute_g-cache_config_line_size"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Cache line size (must be a power of 2, default is 32). If you plan to use the STC in combination to improve the cache performance, this value must be greater or equal to the instruction_profile_line_size.</dd></dl><p></p><dl><dt id="dt:config_replacement_policy"><b><i>config_replacement_policy</i></b></dt><p><a name="__rm_attribute_g-cache_config_replacement_policy"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>string</code>.
Replacement policy ("random", "lru" or "cyclic", default is "random").</dd></dl><p></p><dl><dt id="dt:config_seed"><b><i>config_seed</i></b></dt><p><a name="__rm_attribute_g-cache_config_seed"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Seed for random replacement policy, default is 0).</dd></dl><p></p><dl><dt id="dt:config_virtual_index"><b><i>config_virtual_index</i></b></dt><p><a name="__rm_attribute_g-cache_config_virtual_index"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Address used to compute the set in the cache (0: physical, 1: virtual; default is 0).</dd></dl><p></p><dl><dt id="dt:config_virtual_tag"><b><i>config_virtual_tag</i></b></dt><p><a name="__rm_attribute_g-cache_config_virtual_tag"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Address used to compute the tag of the cache line (0: physical, 1: virtual; default is 0).</dd></dl><p></p><dl><dt id="dt:config_write_allocate"><b><i>config_write_allocate</i></b></dt><p><a name="__rm_attribute_g-cache_config_write_allocate"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Write allocation policy (0: non-write allocate, 1: write-allocate, default is 0).</dd></dl><p></p><dl><dt id="dt:config_write_back"><b><i>config_write_back</i></b></dt><p><a name="__rm_attribute_g-cache_config_write_back"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Write policy (0: write-through, 1: write-back, default is 0).</dd></dl><p></p><dl><dt id="dt:cpus"><b><i>cpus</i></b></dt><p><a name="__rm_attribute_g-cache_cpus"></a></p><dd><b>Required</b> attribute; <b>read/write</b> access; type: <code>[o*]</code>, <code>object</code>, or <code>nil</code>.
cpus that can send transactions to the cache.</dd></dl><p></p><dl><dt id="dt:higher_level_caches"><b><i>higher_level_caches</i></b></dt><p><a name="__rm_attribute_g-cache_higher_level_caches"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[o*]</code> or <code>nil</code>.
Higher level caches that need to receive invalidates during MESI snooping (MESI protocol).</dd></dl><p></p><dl><dt id="dt:lines"><b><i>lines</i></b></dt><p><a name="__rm_attribute_g-cache_lines"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[[iiii]*]</code>.
Content of the cache lines</dd></dl><p></p><dl><dt id="dt:lines_last_used"><b><i>lines_last_used</i></b></dt><p><a name="__rm_attribute_g-cache_lines_last_used"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[i*]</code>.
Last used timestamp for the cache lines</dd></dl><p></p><dl><dt id="dt:next_line_in_set"><b><i>next_line_in_set</i></b></dt><p><a name="__rm_attribute_g-cache_next_line_in_set"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[i*]</code>.
Next line used for replacement in a given set.</dd></dl><p></p><dl><dt id="dt:penalty_read"><b><i>penalty_read</i></b></dt><p><a name="__rm_attribute_g-cache_penalty_read"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Stall penalty (in cycles) for any incoming read transaction. A cache-hit on read will only suffer a 'read' penalty (default is 0). Note that if you set this to a non-zero value, the simulation won't be able to use the STCs.</dd></dl><p></p><dl><dt id="dt:penalty_read_next"><b><i>penalty_read_next</i></b></dt><p><a name="__rm_attribute_g-cache_penalty_read_next"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Stall penalty (in cycles) for a read transaction issued by the cache to the next level cache. A cache miss on read will have a penalty for 'read' (incoming transaction) + 'read-next' (line fetch transaction) + any penalty set by the next caches. (default is 0)</dd></dl><p></p><dl><dt id="dt:penalty_write"><b><i>penalty_write</i></b></dt><p><a name="__rm_attribute_g-cache_penalty_write"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Stall penalty (in cycles) for any incoming write transaction. A cache-hit on write (in a write-back cache) will only suffer a 'write' penalty (default is 0). Note that if you set this to a non-zero value, the simulation won't be able to use the STCs.</dd></dl><p></p><dl><dt id="dt:penalty_write_next"><b><i>penalty_write_next</i></b></dt><p><a name="__rm_attribute_g-cache_penalty_write_next"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Stall penalty (in cycles) for a write transactions issued by the cache to the next level cache. In a write-back cache, a cache miss on read triggering a copy-back transaction will have a penalty for 'read', 'write-next' (copy-back transaction) and 'read-next' (line fetch transaction). In write-through cache, a write transaction will always have at least a penalty for 'write' and 'write-next' (write-through transaction). (default is 0).</dd></dl><p></p><dl><dt id="dt:profilers"><b><i>profilers</i></b></dt><p><a name="__rm_attribute_g-cache_profilers"></a></p><dd><b>Session</b> attribute; <b>read/write</b> access; type: <code>[o|n*]</code>; <b>integer</b> indexed;  indexed type: <code>object</code> or <code>nil</code>.
Profilers connected to the cache.</dd></dl><p></p><dl><dt id="dt:snoopers"><b><i>snoopers</i></b></dt><p><a name="__rm_attribute_g-cache_snoopers"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[o*]</code> or <code>nil</code>.
Caches listening on the bus (MESI protocol).</dd></dl><p></p><dl><dt id="dt:stat_c_dev_data_read"><b><i>stat_c_dev_data_read</i></b></dt><p><a name="__rm_attribute_g-cache_stat_c_dev_data_read"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cached device data read transactions (DMA).</dd></dl><p></p><dl><dt id="dt:stat_c_dev_data_write"><b><i>stat_c_dev_data_write</i></b></dt><p><a name="__rm_attribute_g-cache_stat_c_dev_data_write"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cached device data write transactions (DMA).</dd></dl><p></p><dl><dt id="dt:stat_copy_back"><b><i>stat_copy_back</i></b></dt><p><a name="__rm_attribute_g-cache_stat_copy_back"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of copy-back transactions initiated by the cache.</dd></dl><p></p><dl><dt id="dt:stat_data_read"><b><i>stat_data_read</i></b></dt><p><a name="__rm_attribute_g-cache_stat_data_read"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable data read transactions (may be underestimated if the STCs are used, see Simics Analyzer Guide for more information).</dd></dl><p></p><dl><dt id="dt:stat_data_read_miss"><b><i>stat_data_read_miss</i></b></dt><p><a name="__rm_attribute_g-cache_stat_data_read_miss"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable data read transactions that missed in the cache.</dd></dl><p></p><dl><dt id="dt:stat_data_write"><b><i>stat_data_write</i></b></dt><p><a name="__rm_attribute_g-cache_stat_data_write"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable data write transactions (may be underestimated if the STCs are used, see Simics Analyzer Guide for more information).</dd></dl><p></p><dl><dt id="dt:stat_data_write_miss"><b><i>stat_data_write_miss</i></b></dt><p><a name="__rm_attribute_g-cache_stat_data_write_miss"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable data write transactions that missed in the cache (write-through caches report a correct miss value but all writes are sent to the next level).</dd></dl><p></p><dl><dt id="dt:stat_dev_data_read"><b><i>stat_dev_data_read</i></b></dt><p><a name="__rm_attribute_g-cache_stat_dev_data_read"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of device data read transactions (DMA).</dd></dl><p></p><dl><dt id="dt:stat_dev_data_write"><b><i>stat_dev_data_write</i></b></dt><p><a name="__rm_attribute_g-cache_stat_dev_data_write"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of device data write transactions (DMA).</dd></dl><p></p><dl><dt id="dt:stat_inst_fetch"><b><i>stat_inst_fetch</i></b></dt><p><a name="__rm_attribute_g-cache_stat_inst_fetch"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable instruction fetches (may be underestimated if the STCs are used, see Simics Analyzer Guide for more information).</dd></dl><p></p><dl><dt id="dt:stat_inst_fetch_miss"><b><i>stat_inst_fetch_miss</i></b></dt><p><a name="__rm_attribute_g-cache_stat_inst_fetch_miss"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of cacheable instruction fetches that missed in the cache.</dd></dl><p></p><dl><dt id="dt:stat_lost_stall_cycles"><b><i>stat_lost_stall_cycles</i></b></dt><p><a name="__rm_attribute_g-cache_stat_lost_stall_cycles"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Stall cycles lost due to non-stallable transactions.</dd></dl><p></p><dl><dt id="dt:stat_mesi_exclusive_to_shared"><b><i>stat_mesi_exclusive_to_shared</i></b></dt><p><a name="__rm_attribute_g-cache_stat_mesi_exclusive_to_shared"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of Exclusive to Shared transitions in MESI protocol.</dd></dl><p></p><dl><dt id="dt:stat_mesi_invalidate"><b><i>stat_mesi_invalidate</i></b></dt><p><a name="__rm_attribute_g-cache_stat_mesi_invalidate"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of lines invalidated in MESI protocol.</dd></dl><p></p><dl><dt id="dt:stat_mesi_modified_to_shared"><b><i>stat_mesi_modified_to_shared</i></b></dt><p><a name="__rm_attribute_g-cache_stat_mesi_modified_to_shared"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of Modified to Shared transitions in MESI protocol.</dd></dl><p></p><dl><dt id="dt:stat_transaction"><b><i>stat_transaction</i></b></dt><p><a name="__rm_attribute_g-cache_stat_transaction"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Total number of transactions seen by the cache.</dd></dl><p></p><dl><dt id="dt:stat_uc_data_read"><b><i>stat_uc_data_read</i></b></dt><p><a name="__rm_attribute_g-cache_stat_uc_data_read"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of uncacheable data read transactions.</dd></dl><p></p><dl><dt id="dt:stat_uc_data_write"><b><i>stat_uc_data_write</i></b></dt><p><a name="__rm_attribute_g-cache_stat_uc_data_write"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of uncacheable data write transactions.</dd></dl><p></p><dl><dt id="dt:stat_uc_inst_fetch"><b><i>stat_uc_inst_fetch</i></b></dt><p><a name="__rm_attribute_g-cache_stat_uc_inst_fetch"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code>.
Number of uncacheable inst fetch transactions.</dd></dl><p></p><dl><dt id="dt:timing_model"><b><i>timing_model</i></b></dt><p><a name="__rm_attribute_g-cache_timing_model"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>object</code> or <code>nil</code>.
Object listening on transactions coming from the cache (line fetch, copy-back).</dd></dl><p>
</p><h2 class="jdocu"><a class="not-numbered" name="Command-List">Command List</a></h2>
<p>

</p><dl class="jdocu_di">
<dt class="jdocu_descitem"><b>Commands defined by interface conf_object</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.break-hap">break-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-attribute-list">get-attribute-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-interface-list">get-interface-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-interface-port-list">get-interface-port-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.list-attributes">list-attributes</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.list-interfaces">list-interfaces</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log">log</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-group">log-group</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-level">log-level</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-setup">log-setup</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-size">log-size</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-type">log-type</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.trace-hap">trace-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.unbreak-hap">unbreak-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.untrace-hap">untrace-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.wait-for-log">wait-for-log</a></dd>
<dt class="jdocu_descitem"><b>Commands</b></dt><dd class="jdocu_descitem"><table>

<tbody><tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.add-profiler">add-profiler</a></b></td><td class="jdocu_noborder">add a profiler to the cache</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.info">info</a></b></td><td class="jdocu_noborder">print information about the object</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.line-status">line-status</a></b></td><td class="jdocu_noborder">print the cache lines status</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.remove-profiler">remove-profiler</a></b></td><td class="jdocu_noborder">remove a profiler from the cache</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.reset-cache-lines">reset-cache-lines</a></b></td><td class="jdocu_noborder">reset all the cache lines</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.reset-statistics">reset-statistics</a></b></td><td class="jdocu_noborder">reset the cache statistics</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.statistics">statistics</a></b></td><td class="jdocu_noborder">print the cache statistics</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_g-cache_gt_.status">status</a></b></td><td class="jdocu_noborder">print status of the object</td></tr>

</tbody></table>
</dd>
</dl><p>
</p><div class=chain>
<a href="__rm_class_ftp-service.html" class="previous">ftp-service</a>
<a href="__rm_class_gdb-remote.html" class="next">gdb-remote</a>
</div>
