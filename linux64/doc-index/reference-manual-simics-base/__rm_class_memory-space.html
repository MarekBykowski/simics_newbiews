<!doctype html>
<head>
<meta charset=utf-8>
<link rel="stylesheet" href="simics.css">
<title>memory-space</title>
<script>function postUrl() {
    window.parent.postMessage({ content_url: window.location.href }, "*");
}
if (window.parent != null && window.parent != window) {
    postUrl();
    window.addEventListener("hashchange", function () {
        postUrl();
    });
} else {
    // Check if we are part of a Simics doc site and redirect if we are
    fetch("../simics-doc-site-marker", { method: "HEAD" }).then(response => {
        if (response.ok) {
            window.location = "..#" + window.location.href;
        } else {
            console.info("Not part of a Simics documentation site");
        }
    }).catch(error => {
        console.warn("Failed to check if this is a Simics documentation site:",
            error);
    });
}</script>
</head><body>
<div class=chain>
<a href="__rm_class_mem-traffic-meter.html" class="previous">mem-traffic-meter</a>
<a href="__rm_class_memory_profiler.html" class="next">memory_profiler</a>
</div>
<div class=path>
<a href="index.html">Simics Reference Manual</a>&nbsp;/&nbsp;
<a href="classes.html">5 Classes</a>&nbsp;/&nbsp;
</div>
<h1 class="jdocu"><a class="not-numbered" name="__rm_class_memory-space">memory-space</a></h1>
<p>

<a name="memory-space"></a></p><dl class="jdocu_di">
<dt class="jdocu_descitem"><b>Provided By</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="modules.html#__rm_module_Simics-Core">Simics Core</a>
</dd>
<dt class="jdocu_descitem">Description</dt><dd class="jdocu_descitem">Instances of the <b>memory-space</b> class provide linear address spaces into which devices and memory can be mapped.
</dd>
<dt class="jdocu_descitem"><b>Interfaces Implemented</b></dt><dd class="jdocu_descitem">breakpoint, breakpoint_query, breakpoint_query_v2, breakpoint_trigger, conf_object, direct_memory_lookup, direct_memory_lookup_v2, log_object, map_demap, memory_space, transaction, translate, translator</dd>
</dl><p></p><h2 class="jdocu"><a class="not-numbered" name="Attributes">Attributes</a></h2>
<p></p><dl><dt id="dt:default_target"><b><i>default_target</i></b></dt><p><a name="__rm_attribute_memory-space_default_target"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[o|[os|n]iio|[os|n]|n]</code>, <code>[o|[os|n]iio|[os|n]|ni]</code>, <code>[o|[os|n]iio|[os|n]|nii]</code>, or <code>nil</code>.
(<i>object</i>, <i>function</i>, <i>offset</i>, <i>target</i>, <i>align-size</i>, <i>byte-swap</i>).<br> An access not targeting any object in the <i>map</i> attribute will be forwarded to the default target. See the <i>map</i> attribute for an explanation of the list entries.</dd></dl><p></p><dl><dt id="dt:ignore_unmapped_writes"><b><i>ignore_unmapped_writes</i></b></dt><p><a name="__rm_attribute_memory-space_ignore_unmapped_writes"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>boolean</code>.
Set to true to ignore unmapped write accesses; otherwise, they generate an error. Default is false.</dd></dl><p></p><dl><dt id="dt:map"><b><i>map</i></b></dt><p><a name="__rm_attribute_memory-space_map"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[[io|[os|n]iii]|[io|[os|n]iiio|[os|n]|n]|[io|[os|n]iiio|[os|n]|ni]|[io|[os|n]iiio|[os|n]|nii]|[io|[os|n]iiio|[os|n]|niii]*]</code>.
((<i>base</i>, <i>object</i> <b>or</b> (<i>object</i>, "<i>port</i>"), <i>function</i>, <i>offset</i>, <i>length</i>, <i>target</i>, <i>priority</i>, <i>align-size</i>, <i>byte-swap</i>)*).<br><br> Maps zero or more objects in the memory space. If <b>target</b> is not NIL, then <b>object</b> must implement at least one of the <code>translator</code>, <code>translate</code>, or <code>bridge</code> interfaces, searched in that order. The <b>target</b>, or <b>object</b> if <b>target</b> is NIL, must implement at least one of the <code>ram</code>, <code>rom</code>, <code>io_memory</code>, <code>port_space</code>, <code>transaction</code>, <code>translator</code>, or <code>transaction_translator</code> interfaces, searched in that order, or it can implement both <code>translate</code> and <code>memory_space</code>. (Some of these interfaces are Simics internal and cannot be implemented by user-defined classes).<br><br> If <b>object</b> only implements the <code>bridge</code> interface, then the <b>target</b> field must be set. If <b>object</b> implements <code>translator</code>, or <code>translate</code>, then <b>target</b> is optional and used as default target.<br><br>The <b>memory-space</b> class implements the <code>translator</code>, <code>translate</code> and <code>memory_space</code> interfaces, and can thus be passed as <b>object</b>, without any <b>target</b>.<br><br> <b>object</b> is mapped in the address space from <i>base</i> to <i>base</i> + <i>length</i> − 1 (inclusive). For a DML device, <b>object</b> is usually the bank object (<b>object.bank.&lt;bank_name&gt;</b>). A deprecated alternative is to map a port interface, represented by a pair [<b>object</b>, "portname"]. The <i>function</i> field is deprecated and usually equals 0. It is passed to io_memory.operation() as a field in the map_info struct argument; it is used in some legacy PCI device models to select bank. The <i>priority</i> (-32768 – 32767) is used when multiple mappings exist on the same address. The mapping with the lowest number has the highest priority.<br><br> If the map target does not support large accesses, then <i>align-size</i> can be set to the maximum allowed size (which must be a power of two). Accesses spanning align boundaries will be split into several smaller transactions. By default, the align size is set to 4 for port-space devices and 8 for other devices, but is not used for memory. Mappings with an <i>align-size</i> of 2, 4, or 8 may set the <i>byte-swap</i> field to 1, 2 or 3. A value of 1 will model bridges that perform byte swapping on a specific bus width. 3 will swap all bytes in the transaction based on the access size. And with 2 the bus and transaction byte-swap variants will be combined. Consider a mapping with a 4-byte align size and memory at address 0 that contains the bytes: 0x00 0x01 0x02 0x03. A 2-byte big-endian read access at address 0 will give the following values as results. No swap: 0x0001, bus swap: 0x0302, bus and transaction swap: 0x0203 and transaction swap: 0x0100.<br><br> The typical syntax for this attribute is: <br><br> <b>memory-space</b>.<i>map</i> = [<br>    [0xa000, <b>obj.bank.foo</b>, 0, 0, 0x1000],<br>    [0xf000, <b>obj.bank.bar</b>, 0, 0, 0x0200]<br> ]<br><br> This will map the bank <i>foo</i> at 0xa000. The length of the mapping is 0x1000 bytes. Similarly, the bank <i>bar</i> will be mapped at 0xf000 with a length of 0x0200 bytes.</dd></dl><p></p><dl><dt id="dt:memory"><b><i>memory</i></b></dt><p><a name="__rm_attribute_memory-space_memory"></a></p><dd><b>Pseudo</b> attribute; <b>read/write</b> access; type: <code>data</code>; <b>integer</b> or <b>list</b> indexed;  indexed type: <code>[i*]</code>, <code>data</code>, or <code>integer</code>.
Read from or write to the space. Data is read without side effects (with the inquiry bit set), while writes are allowed to trigger side effects (including actually writing the data).</dd></dl><p></p><dl><dt id="dt:snoop_device"><b><i>snoop_device</i></b></dt><p><a name="__rm_attribute_memory-space_snoop_device"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[os]</code>, <code>object</code>, or <code>nil</code>.
The snoop_device is similar to a timing-model, but called after a memory operation is complete. The object has to implement the "snoop_memory" interface, but the returned stall time is ignored.</dd></dl><p></p><dl><dt id="dt:timing_model"><b><i>timing_model</i></b></dt><p><a name="__rm_attribute_memory-space_timing_model"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>[os]</code>, <code>object</code>, or <code>nil</code>.
The timing_model is called when a memory operation reaches the memory-space, before it is performed. The model has to implement the "timing_model" interface.</dd></dl><p></p><dl><dt id="dt:unmapped_read_value"><b><i>unmapped_read_value</i></b></dt><p><a name="__rm_attribute_memory-space_unmapped_read_value"></a></p><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <code>integer</code> or <code>nil</code>.
The byte pattern defined in this attribute will be replicated to represent the value read from unmapped addresses. The default value (nil), will generate an error on such accesses.</dd></dl><p>
</p><h2 class="jdocu"><a class="not-numbered" name="Command-List">Command List</a></h2>
<p>

</p><dl class="jdocu_di">
<dt class="jdocu_descitem"><b>Commands defined by interface breakpoint</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.bp-break-memory">bp-break-memory</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.bp-run-until-memory">bp-run-until-memory</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.bp-trace-memory">bp-trace-memory</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.bp-wait-for-memory">bp-wait-for-memory</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.break">break</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_breakpoint_gt_.tbreak">tbreak</a></dd>
<dt class="jdocu_descitem"><b>Commands defined by interface conf_object</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.break-hap">break-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-attribute-list">get-attribute-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-interface-list">get-interface-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.get-interface-port-list">get-interface-port-list</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.list-attributes">list-attributes</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.list-interfaces">list-interfaces</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log">log</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-group">log-group</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-level">log-level</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-setup">log-setup</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-size">log-size</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.log-type">log-type</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.trace-hap">trace-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.unbreak-hap">unbreak-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.untrace-hap">untrace-hap</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_conf_object_gt_.wait-for-log">wait-for-log</a></dd>
<dt class="jdocu_descitem"><b>Commands defined by interface memory_space</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.debug">debug</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.get">get</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.get-string">get-string</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.load-binary">load-binary</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.load-file">load-file</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.load-intel-hex">load-intel-hex</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.load-intel-obj">load-intel-obj</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.load-vmem">load-vmem</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.read">read</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.read-string">read-string</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.save-file">save-file</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.save-intel-32-obj">save-intel-32-obj</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.save-intel-hex">save-intel-hex</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.save-intel-obj">save-intel-obj</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.save-vmem">save-vmem</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.set">set</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.set-string">set-string</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.write">write</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.write-string">write-string</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_memory_space_gt_.x">x</a></dd>
<dt class="jdocu_descitem"><b>Commands defined by interface transaction</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_transaction_gt_.wait-for-get">wait-for-get</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_transaction_gt_.wait-for-read">wait-for-read</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_transaction_gt_.wait-for-set">wait-for-set</a>, <a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_transaction_gt_.wait-for-write">wait-for-write</a></dd>
<dt class="jdocu_descitem"><b>Commands defined by interface translator</b></dt><dd class="jdocu_descitem"><a class="jdocu" href="namespace-commands-by-interface.html#__rm_command__lt_translator_gt_.memory-map">memory-map</a></dd>
<dt class="jdocu_descitem"><b>Commands</b></dt><dd class="jdocu_descitem"><table>

<tbody><tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_memory-space_gt_.add-map">add-map</a></b></td><td class="jdocu_noborder">map device in a memory-space</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_memory-space_gt_.del-map">del-map</a></b></td><td class="jdocu_noborder">remove device map from a memory-space</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_memory-space_gt_.info">info</a></b></td><td class="jdocu_noborder">print information about the object</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_memory-space_gt_.map">map</a></b></td><td class="jdocu_noborder">print memory map</td></tr>

<tr><td class="jdocu_noborder"><b><a class="jdocu" href="namespace-commands-by-class.html#__rm_command__lt_memory-space_gt_.status">status</a></b></td><td class="jdocu_noborder">print status of the object</td></tr>

</tbody></table>
</dd>
</dl><p>
</p><div class=chain>
<a href="__rm_class_mem-traffic-meter.html" class="previous">mem-traffic-meter</a>
<a href="__rm_class_memory_profiler.html" class="next">memory_profiler</a>
</div>
